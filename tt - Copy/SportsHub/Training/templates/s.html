<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Mediapipe Feed</title>
</head>
<body>
    <h1>Mediapipe Feed</h1>
    <div>
        <video id="mediapipeVideo" autoplay></video>
        <canvas id="mediapipeCanvas"></canvas>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/pose@0.8.5/dist/pose.bundle.js"></script>
    <script>
        const mediapipeVideo = document.getElementById('mediapipeVideo');
        const mediapipeCanvas = document.getElementById('mediapipeCanvas');

        // Initialize MediaPipe pose instance
        const pose = new Pose({
            locateFile: (file) => `https://cdn.jsdelivr.net/npm/@mediapipe/pose@0.8.5/dist/${file}`,
        });

        // Initialize the webcam and start pose estimation
        navigator.mediaDevices.getUserMedia({ 'video': true })
            .then((stream) => {
                mediapipeVideo.srcObject = stream;
                pose.setStream(mediapipeVideo);
            })
            .catch((error) => {
                console.error('Error accessing webcam:', error);
            });

        // Start the pose estimation process
        pose.onResults((results) => {
            const landmarks = results.poseLandmarks;

            // Your code to draw landmarks on the canvas
            drawLandmarks(landmarks);
        });

        // Function to draw landmarks on the canvas
        function drawLandmarks(landmarks) {
            const context = mediapipeCanvas.getContext('2d');
            context.clearRect(0, 0, mediapipeCanvas.width, mediapipeCanvas.height);

            // Loop through landmarks and draw them
            for (const landmark of landmarks) {
                const x = landmark.x * mediapipeCanvas.width;
                const y = landmark.y * mediapipeCanvas.height;
                context.beginPath();
                context.arc(x, y, 3, 0, 2 * Math.PI);
                context.fillStyle = 'red';
                context.fill();
            }
        }
    </script>
</body>
</html>
